<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Alejandra & Ever üíç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: "Georgia", serif;
  background: linear-gradient(#ffffff, #f9f6f7);
  text-align: center;
  color: #7b1e3a;
}

.container {
  max-width: 600px;
  margin: auto;
  padding: 40px 20px;
}

h1 { font-size: 38px; }
.fecha { margin-bottom: 30px; color: #a23b5c; }

.card {
  background: white;
  padding: 32px;
  border-radius: 26px;
  box-shadow: 0 14px 35px rgba(0,0,0,0.08);
}

.mensaje { font-size: 17px; }

input[type="file"] { margin-top: 15px; }

button {
  margin-top: 22px;
  background: #7b1e3a;
  color: white;
  border: none;
  padding: 15px 40px;
  border-radius: 30px;
  font-size: 18px;
  cursor: pointer;
}

button:disabled { background: #ccc; }

#estado { margin-top: 15px; }

/* === CARRUSEL === */
.carousel {
  margin-top: 50px;
  position: relative;
  overflow: hidden;
}

.track {
  display: flex;
  gap: 15px;
  transition: transform 0.6s ease;
}

.track img {
  width: 180px;
  height: 180px;
  object-fit: cover;
  border-radius: 18px;
  box-shadow: 0 8px 20px rgba(0,0,0,0.15);
}

.flecha {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.5);
  color: white;
  border: none;
  font-size: 26px;
  padding: 10px 16px;
  border-radius: 50%;
  cursor: pointer;
}

.flecha.izq { left: 10px; }
.flecha.der { right: 10px; }

/* === BOT√ìN VER TODOS === */
.ver-todas {
  margin-top: 30px;
  background: transparent;
  border: 2px solid #7b1e3a;
  color: #7b1e3a;
}

.ver-todas:hover {
  background: #7b1e3a;
  color: white;
}

/* === MODAL === */
.modal {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(0,0,0,0.9);
  z-index: 1000;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

.modal img, .modal video {
  max-width: 85%;
  max-height: 75%;
  border-radius: 20px;
}

.cerrar {
  position: absolute;
  top: 25px;
  right: 30px;
  font-size: 40px;
  color: white;
  cursor: pointer;
}
</style>
</head>

<body>

<div class="container">
  <h1>Alejandra & Ever</h1>
  <div class="fecha">üíç 5 ¬∑ septiembre ¬∑ 2026</div>

  <div class="card">
    <p class="mensaje">
      Gracias por acompa√±arnos en uno de los d√≠as m√°s felices de nuestras vidas üíï  
      Ay√∫danos a guardar estos recuerdos para siempre.
    </p>

    <!-- MULTI UPLOAD -->
    <input type="file" id="file" multiple accept="image/*,video/*"><br>
    <button id="btnSubir">Subir recuerdos üì∏üé•</button>
    <p id="estado"></p>
  </div>

  <h2 style="margin-top:50px;">Nuestros recuerdos üíï</h2>

  <!-- CARRUSEL -->
  <div class="carousel">
    <button class="flecha izq" onclick="prev()">‚óÄ</button>
    <div class="track" id="galeria"></div>
    <button class="flecha der" onclick="next()">‚ñ∂</button>
  </div>

  <button class="ver-todas" id="btnVerTodos">
    Ver todos los recuerdos üíñ
  </button>
</div>

<!-- MODAL -->
<div id="modal" class="modal">
  <span class="cerrar" onclick="cerrarModal()">&times;</span>
  <div id="modalContenido"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbwEY79MGA3RrwfBESl5OAIpfu2Ggv5I8iSUboQ0p1RnnuOvHhT-I-HIpHdcvj4cRAvY/exec";

let recuerdos = [];
let index = 0;
let autoScroll;

document.getElementById("btnSubir").onclick = subirMultiples;

async function subirMultiples() {
  const files = document.getElementById("file").files;
  const estado = document.getElementById("estado");
  if (!files.length) return;

  estado.innerText = "Subiendo recuerdos... üíï";

  for (const file of files) {
    const reader = new FileReader();
    await new Promise(resolve => {
      reader.onload = async () => {
        await fetch(SCRIPT_URL, {
          method: "POST",
          body: JSON.stringify({
            name: file.name,
            type: file.type,
            base64: reader.result.split(",")[1]
          })
        });
        resolve();
      };
      reader.readAsDataURL(file);
    });
  }

  estado.innerText = "¬°Recuerdos guardados con √©xito! üíñ";
  cargarGaleria();
}

async function cargarGaleria() {
  const res = await fetch(SCRIPT_URL);
  recuerdos = await res.json();

  const galeria = document.getElementById("galeria");
  galeria.innerHTML = "";

  recuerdos
    .filter(r => r.url.includes("thumbnail"))
    .forEach(r => {
      const img = document.createElement("img");
      img.src = r.url;
      galeria.appendChild(img);
    });

  iniciarAuto();
}

function iniciarAuto() {
  clearInterval(autoScroll);
  autoScroll = setInterval(() => next(), 3500);
}

function next() {
  index++;
  document.getElementById("galeria").style.transform = `translateX(-${index * 195}px)`;
  iniciarAuto();
}

function prev() {
  index = Math.max(0, index - 1);
  document.getElementById("galeria").style.transform = `translateX(-${index * 195}px)`;
  iniciarAuto();
}

/* === MODAL === */
document.getElementById("btnVerTodos").onclick = () => {
  abrirModal(0);
};

function abrirModal(i) {
  const cont = document.getElementById("modalContenido");
  cont.innerHTML = "";
  const r = recuerdos[i];

  if (r.url.includes("thumbnail")) {
    const img = document.createElement("img");
    img.src = r.url;
    cont.appendChild(img);
  } else {
    const video = document.createElement("video");
    video.src = r.url;
    video.controls = true;
    cont.appendChild(video);
  }

  document.getElementById("modal").style.display = "flex";
}

function cerrarModal() {
  document.getElementById("modal").style.display = "none";
}

cargarGaleria();
</script>

</body>
</html>
