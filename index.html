<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Alejandra & Ever üíç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- Google Fonts -->
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500;600&family=Montserrat:wght@300;400;500&display=swap" rel="stylesheet">

<style>
:root{
  --vino:#7b1e3a;
  --rosa:#f6c1cc;
  --fondo:#faf7f8;
}

*{box-sizing:border-box}

body{
  margin:0;
  font-family:'Montserrat',sans-serif;
  background:linear-gradient(180deg,#fff,var(--fondo));
  color:var(--vino);
  text-align:center;
}

/* ===== HERO ===== */
.hero{
  min-height:100vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  padding:40px 20px;
  animation:fadeHero 1.2s ease;
}
.hero h1{
  font-family:'Playfair Display',serif;
  font-size:42px;
  margin-bottom:10px;
}
.hero p{
  max-width:520px;
  font-size:16px;
  opacity:.85;
}
@keyframes fadeHero{
  from{opacity:0;transform:translateY(20px)}
  to{opacity:1;transform:none}
}
.scroll{
  margin-top:40px;
  font-size:14px;
  opacity:.6;
}

/* ===== SECCIONES ===== */
.section{
  max-width:760px;
  margin:80px auto;
  padding:0 20px;
  animation:fadeUp .8s ease both;
}
@keyframes fadeUp{
  from{opacity:0;transform:translateY(30px)}
  to{opacity:1;transform:none}
}
.card{
  background:white;
  border-radius:32px;
  padding:40px 30px;
  box-shadow:0 20px 45px rgba(0,0,0,.08);
}

/* ===== BOTONES ===== */
button{
  background:var(--vino);
  color:white;
  border:none;
  padding:15px 38px;
  border-radius:40px;
  font-size:16px;
  cursor:pointer;
  transition:.3s;
}
button:hover{transform:translateY(-2px);opacity:.9}

/* ===== INPUTS ===== */
input,textarea{
  width:100%;
  max-width:420px;
  padding:14px;
  border-radius:18px;
  border:1px solid #ddd;
  margin:10px auto;
  font-family:inherit;
}
textarea{resize:none;height:100px}

/* ===== CARRUSEL ===== */
.carousel{
  position:relative;
  margin-top:30px;
  overflow:hidden;
}
.track{
  display:flex;
  gap:18px;
  transition:transform .6s ease;
}
.track img{
  width:200px;height:200px;
  border-radius:22px;
  object-fit:cover;
  box-shadow:0 10px 30px rgba(0,0,0,.18);
  cursor:pointer;
}
.arrow{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  background:rgba(0,0,0,.45);
  color:white;
  border:none;
  font-size:28px;
  padding:12px 18px;
  border-radius:50%;
  cursor:pointer;
}
.arrow.left{left:10px}
.arrow.right{right:10px}

/* ===== MODAL ===== */
.modal{
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.92);
  z-index:3000;
  align-items:center;
  justify-content:center;
}
.close{
  position:absolute;
  top:20px;
  right:25px;
  font-size:36px;
  color:white;
  cursor:pointer;
}
.viewer{
  width:94%;
  max-width:900px;
  height:80vh;
  border-radius:28px;
  overflow:hidden;
  display:flex;
  align-items:center;
  justify-content:center;
}
.viewer img, .viewer iframe{
  width:100%;
  height:100%;
  object-fit:contain;
  border:none;
}

/* ===== MENSAJES ===== */
.msg{
  background:white;
  padding:22px;
  border-radius:20px;
  margin:15px 0;
  box-shadow:0 10px 25px rgba(0,0,0,.1);
}
.msg.largo{background:#fff7f9;border-left:5px solid var(--rosa)}
.likes{margin-top:10px;color:#e2557b}
.likes span{cursor:pointer;font-size:18px}

/* ===== OVERLAY ===== */
.overlay{
  position:fixed;
  inset:0;
  background:rgba(255,255,255,.96);
  display:none;
  z-index:4000;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}
.hearts span{
  font-size:32px;
  animation:pulse 1.3s infinite ease-in-out;
}
@keyframes pulse{
  0%{transform:scale(1);opacity:.4}
  50%{transform:scale(1.4);opacity:1}
  100%{transform:scale(1);opacity:.4}
}
</style>
</head>

<body>

<!-- HERO -->
<div class="hero">
  <h1>Alejandra & Ever üíç</h1>
  <p>
    Est√°s a punto de guardar un recuerdo que vivir√° para siempre.
    Gracias por ser parte de nuestra historia üíñ
  </p>
  <div class="scroll">Desliza ‚Üì</div>
</div>

<!-- SUBIR -->
<div class="section">
  <div class="card">
    <h2>Guarda un recuerdo üì∏üé•</h2>
    <input type="file" id="file" multiple accept="image/*,video/*">
    <br>
    <button onclick="subirRecuerdos()">Subir recuerdos</button>
  </div>
</div>

<!-- RECUERDOS -->
<div class="section">
  <h2>Nuestra historia en im√°genes üíû</h2>
  <div class="carousel">
    <button class="arrow left" onclick="mover(-1)">‚ùÆ</button>
    <div class="track" id="galeria"></div>
    <button class="arrow right" onclick="mover(1)">‚ùØ</button>
  </div>
  <br>
  <button onclick="abrirModal()">Ver todos los recuerdos</button>
</div>

<!-- MENSAJE -->
<div class="section">
  <div class="card">
    <h2>D√©janos unas palabras üíå</h2>
    <input id="nombre" placeholder="Tu nombre">
    <textarea id="mensaje" placeholder="Escribe algo bonito‚Ä¶"></textarea>
    <br>
    <button onclick="enviarMensaje()">Enviar mensaje</button>
    <br><br>
    <button onclick="abrirMensajes()">Ver mensajes</button>
  </div>
</div>

<!-- OVERLAY -->
<div class="overlay" id="overlay">
  <div class="hearts"><span>üíñ</span></div>
  <p>Guardando con amor‚Ä¶</p>
</div>

<!-- MODAL -->
<div class="modal" id="modal">
  <span class="close" onclick="modal.style.display='none'">√ó</span>
  <div class="viewer" id="modalContent"></div>
</div>

<script>
const API="https://script.google.com/macros/s/AKfycbyMWZyzjjH4OqgaMr7NJkpIKWO6JMmUBKowwZDZAIYRHwmmo-MVwbqTlbOaZ-soaDEb/exec";
let recuerdos=[],idx=0;

/* ===== CARGAR ===== */
async function cargar(){
  recuerdos=await fetch(API).then(r=>r.json());
  galeria.innerHTML="";
  recuerdos.filter(r=>r.type==="image").forEach((r,i)=>{
    const img=document.createElement("img");
    img.src=r.url;
    img.onclick=()=>{idx=i;abrirModal()};
    galeria.appendChild(img);
  });
}
cargar();

function mover(d){
  if(!recuerdos.length)return;
  idx=(idx+d+recuerdos.length)%recuerdos.length;
  galeria.style.transform=`translateX(-${idx*218}px)`;
}

/* ===== MODAL ===== */
function abrirModal(){
  const r=recuerdos[idx];
  modalContent.innerHTML=r.type==="image"
    ? `<img src="${r.url}">`
    : `<iframe src="${r.url}"></iframe>`;
  modal.style.display="flex";
}

/* ===== SUBIR ===== */
async function subirRecuerdos(){
  if(!file.files.length){alert("Selecciona archivos üíï");return;}
  overlay.style.display="flex";
  for(const f of file.files){
    const b=await f.arrayBuffer();
    await fetch(API,{
      method:"POST",
      body:JSON.stringify({
        name:f.name,
        type:f.type,
        base64:btoa(String.fromCharCode(...new Uint8Array(b)))
      })
    });
  }
  overlay.style.display="none";
  cargar();
}

/* ===== MENSAJES ===== */
async function enviarMensaje(){
  if(!nombre.value||!mensaje.value)return;
  await fetch(API,{
    method:"POST",
    body:JSON.stringify({nombre:nombre.value,mensaje:mensaje.value})
  });
  nombre.value="";mensaje.value="";
}
function abrirMensajes(){
  window.alert("Aqu√≠ se abre el modal de mensajes (ya integrado antes).");
}
</script>

</body>
</html>
