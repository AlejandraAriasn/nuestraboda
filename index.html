<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Alejandra & Ever üíç</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body {
  margin: 0;
  font-family: "Georgia", serif;
  background: linear-gradient(#ffffff, #f9f6f7);
  text-align: center;
  color: #7b1e3a;
}

.container {
  max-width: 620px;
  margin: auto;
  padding: 40px 20px;
}

h1 { font-size: 38px; }
.fecha { margin-bottom: 30px; color: #a23b5c; }

.card {
  background: white;
  padding: 32px;
  border-radius: 26px;
  box-shadow: 0 14px 35px rgba(0,0,0,0.08);
}

.mensaje { font-size: 17px; }

input[type="file"] { margin-top: 15px; }

button {
  margin-top: 22px;
  background: #7b1e3a;
  color: white;
  border: none;
  padding: 15px 40px;
  border-radius: 30px;
  font-size: 18px;
  cursor: pointer;
}

#estado {
  margin-top: 15px;
  color: #a23b5c;
}

/* ‚ù§Ô∏è CORAZONES */
.loader {
  display: flex;
  justify-content: center;
  gap: 10px;
}

.loader span {
  font-size: 30px;
  color: #7b1e3a;
  animation: latir 1.4s infinite ease-in-out;
}

.loader span:nth-child(1){animation-delay:0s}
.loader span:nth-child(2){animation-delay:.2s}
.loader span:nth-child(3){animation-delay:.4s}

@keyframes latir {
  0%{transform:scale(1);opacity:.4}
  20%{transform:scale(1.4);opacity:1}
  40%{transform:scale(1);opacity:.4}
  100%{transform:scale(1);opacity:.4}
}

/* üßä OVERLAY DE CARGA */
.overlay {
  position: fixed;
  inset: 0;
  background: rgba(255,255,255,0.95);
  z-index: 2000;
  display: none;
  align-items: center;
  justify-content: center;
  flex-direction: column;
}

.overlay p {
  margin-top: 18px;
  font-size: 16px;
  color: #7b1e3a;
  max-width: 280px;
}

/* ===== CARRUSEL ===== */
.carousel {
  margin-top: 50px;
  position: relative;
  overflow: hidden;
}

.track {
  display: flex;
  gap: 15px;
  transition: transform 0.6s ease;
}

.track img {
  width: 180px;
  height: 180px;
  object-fit: cover;
  border-radius: 18px;
  box-shadow: 0 8px 20px rgba(0,0,0,.15);
}

.flecha {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,.55);
  color: white;
  border: none;
  font-size: 26px;
  padding: 10px 16px;
  border-radius: 50%;
  cursor: pointer;
}

.flecha.izq{left:10px}
.flecha.der{right:10px}

/* ===== MODAL ===== */
.modal {
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,.92);
  z-index:1000;
  align-items:center;
  justify-content:center;
  flex-direction:column;
}

.modal::before {
  content:"";
  position:absolute;
  inset:0;
  background-size:cover;
  background-position:center;
  filter: blur(25px) brightness(.5);
  transform: scale(1.1);
  z-index:-1;
}

.visor {
  width:90%;
  max-width:900px;
  aspect-ratio:16/9;
  background:rgba(0,0,0,.6);
  border-radius:24px;
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  animation: fade .35s ease;
}

@keyframes fade {
  from{opacity:.2}
  to{opacity:1}
}

.visor img {
  max-width:100%;
  max-height:100%;
  object-fit:contain;
}

.visor iframe {
  width:100%;
  height:100%;
  border:none;
}

.cerrar {
  position:absolute;
  top:25px;
  right:30px;
  font-size:40px;
  color:white;
  cursor:pointer;
}

.controles {
  margin-top:18px;
  display:flex;
  gap:40px;
}

.controles button {
  background:rgba(255,255,255,.2);
  border:none;
  color:white;
  font-size:28px;
  padding:12px 26px;
  border-radius:50%;
  cursor:pointer;
}

.contador {
  margin-top:12px;
  color:white;
  font-size:14px;
}
</style>
</head>

<body>

<div class="container">
  <h1>Alejandra & Ever</h1>
  <div class="fecha">üíç 5 ¬∑ septiembre ¬∑ 2026</div>

  <div class="card">
    <p class="mensaje">
      Gracias por acompa√±arnos en uno de los d√≠as m√°s felices de nuestras vidas üíï  
      Ay√∫danos a guardar estos recuerdos para siempre.
    </p>

    <input type="file" id="file" multiple accept="image/*,video/*"><br>
    <button id="btnSubir">Subir recuerdos üì∏üé•</button>
    <p id="estado"></p>
  </div>

  <h2 style="margin-top:50px;">Nuestros recuerdos üíï</h2>

  <div class="carousel">
    <button class="flecha izq" onclick="mover(-1)">‚óÄ</button>
    <div class="track" id="galeria"></div>
    <button class="flecha der" onclick="mover(1)">‚ñ∂</button>
  </div>

  <button class="ver-todos" id="btnVerTodos">Ver todos los recuerdos üíñ</button>
</div>

<!-- OVERLAY -->
<div id="overlay" class="overlay">
  <div class="loader">
    <span>‚ù§</span><span>‚ù§</span><span>‚ù§</span>
  </div>
  <p>
    Estamos guardando este recuerdo con mucho amor‚Ä¶<br>
    Gracias por hacer parte de nuestra historia üíï
  </p>
</div>

<!-- MODAL -->
<div id="modal" class="modal">
  <span class="cerrar" onclick="cerrarModal()">&times;</span>
  <div class="visor">
    <div id="modalContenido"></div>
  </div>
  <div class="controles">
    <button onclick="anteriorRecuerdo()">‚óÄ</button>
    <button onclick="siguienteRecuerdo()">‚ñ∂</button>
  </div>
  <div id="contador" class="contador"></div>
</div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx8VOYLQROH9355Usvu2M7mguRZ8L8X4rL9kKtkH7lTak6JRmXgQkL9BCsRWOE61b2f/exec";

let recuerdos=[], fotosCarrusel=[];
let indexCarrusel=0, autoTimer=null;
let indiceRecuerdo=0;

/* SUBIR */
document.getElementById("btnSubir").onclick = async () => {
  const files = document.getElementById("file").files;
  const overlay = document.getElementById("overlay");
  const estado = document.getElementById("estado");

  if (!files.length) {
    estado.innerText = "Por favor selecciona al menos un recuerdo para compartir üíï";
    return;
  }

  estado.innerText = "";
  overlay.style.display = "flex";

  for (const file of files) {
    const reader = new FileReader();
    await new Promise(resolve => {
      reader.onload = async () => {
        await fetch(SCRIPT_URL, {
          method: "POST",
          body: JSON.stringify({
            name: file.name,
            type: file.type,
            base64: reader.result.split(",")[1]
          })
        });
        resolve();
      };
      reader.readAsDataURL(file);
    });
  }

  overlay.style.display = "none";
  estado.innerText = "¬°Gracias por compartir este recuerdo tan especial! üíñ";
  cargarGaleria();
};

/* GALER√çA */
async function cargarGaleria(){
  const res = await fetch(SCRIPT_URL);
  recuerdos = await res.json();
  fotosCarrusel = recuerdos.filter(r=>r.type==="image");
  renderCarrusel();
  iniciarAuto();
}

/* CARRUSEL */
function renderCarrusel(){
  const g=document.getElementById("galeria");
  g.innerHTML="";
  fotosCarrusel.forEach(f=>{
    const img=document.createElement("img");
    img.src=f.url;
    g.appendChild(img);
  });
  indexCarrusel=0;
  actualizarCarrusel();
}
function mover(dir){
  indexCarrusel=(indexCarrusel+dir+fotosCarrusel.length)%fotosCarrusel.length;
  actualizarCarrusel();
  iniciarAuto();
}
function actualizarCarrusel(){
  document.getElementById("galeria").style.transform =
    `translateX(-${indexCarrusel*195}px)`;
}
function iniciarAuto(){
  clearInterval(autoTimer);
  autoTimer=setInterval(()=>mover(1),3500);
}

/* MODAL */
document.getElementById("btnVerTodos").onclick=()=>{
  if(!recuerdos.length) return;
  indiceRecuerdo=0;
  mostrarRecuerdo();
  document.getElementById("modal").style.display="flex";
};

function mostrarRecuerdo(){
  const cont=document.getElementById("modalContenido");
  cont.innerHTML="";
  const r=recuerdos[indiceRecuerdo];

  document.getElementById("modal").style.backgroundImage =
    r.type==="image" ? `url(${r.url})` : "none";

  if(r.type==="image"){
    const img=document.createElement("img");
    img.src=r.url;
    cont.appendChild(img);
  } else {
    const iframe=document.createElement("iframe");
    iframe.src=r.url;
    iframe.allow="autoplay";
    cont.appendChild(iframe);
  }

  document.getElementById("contador").innerText =
    `${indiceRecuerdo+1} / ${recuerdos.length}`;
}

function siguienteRecuerdo(){
  indiceRecuerdo=(indiceRecuerdo+1)%recuerdos.length;
  mostrarRecuerdo();
}
function anteriorRecuerdo(){
  indiceRecuerdo=(indiceRecuerdo-1+recuerdos.length)%recuerdos.length;
  mostrarRecuerdo();
}
function cerrarModal(){
  document.getElementById("modal").style.display="none";
}

/* INIT */
cargarGaleria();
</script>

</body>
</html>
